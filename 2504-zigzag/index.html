<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>BEÂ·YOUÂ·TIFUL ZIGZAG</title>
  
  <!-- ë¸Œë¼ìš°ì € ìºì‹œ ì œì–´ë¥¼ ìœ„í•œ ë©”íƒ€ íƒœê·¸ ì¶”ê°€ -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  
  <link rel="stylesheet" href="styles.css">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Poppins ì›¹í°íŠ¸ ì¶”ê°€ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <link rel="manifest" href="./manifest.json">
  
  <!-- iOS PWA í˜¸í™˜ì„±ì„ ìœ„í•œ íƒœê·¸ -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ì§€ê·¸ì¬ê·¸ íŒì—…ì•ˆë‚´ë„">
  <link rel="apple-touch-icon" href="./src/apple-touch-icon.png">
  <meta name="theme-color" content="#E91E63">
</head>
<body class="custom-font">
  <!-- ê³µì§€ íŒì—… ì¶”ê°€ -->
  <div id="notice-popup" class="notice-popup" style="display: none;">
    <div class="notice-content">
      <h3>ì•ˆë‚´</h3>
      <ul>
        <li>ê°„ë‹¨í•˜ê²Œ ë§Œë“  í˜ì´ì§€ì´ë¯€ë¡œ ë²„ê·¸ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
        <li>í˜„ì¥ìƒí™©ì— ë”°ë¼ ë³€ë™ê°€ëŠ¥, ë°˜ì˜ ë¶ˆê°€í•©ë‹ˆë‹¤</li>
        <li>ê³µìœ ëŠ” í”¼í•´ì£¼ì„¸ìš” ğŸ˜Š</li>
        <li>ê°€ë‚œí•œ ì„œë²„ì…ë‹ˆë‹¤. ë§‰í ìˆ˜ ìˆìŒ</li>
        <li>ì•„ì´í°ì—ì„œ í…ŒìŠ¤íŠ¸ ì•ˆí•´ë´¤ìŠµë‹ˆë‹¤</li>
      </ul>
      <button id="notice-confirm-btn">í™•ì¸ & ë‹¤ì‹œ ì—´ì§€ ì•Šê¸°</button>
    </div>
  </div>
  
  <div class="container">
    <div class="page-title">
      <h1 id="main-title" style="cursor: pointer;">BEÂ·YOUÂ·TIFUL ZIGZAG</h1>
    </div>
    <div class="map-container">
      <!-- SVG ì§€ë„ -->
      <svg id="booth-map" class="booth-map" viewBox="0 0 320 210" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
        <!-- Background white fill -->
        <rect x="0" y="0" width="320" height="210" fill="white" />
        
        <!-- Top row of pink squares -->
        <g class="booth-wrapper" data-name="ì‡í“¨" style="transform-origin: 20px 20px;">
          <rect id="booth-itpu" x="0" y="0" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="20" y="24" text-anchor="middle" font-size="11" fill="#E91E63" font-weight="bold">ì‡í“¨</text>
        </g>
        
        <g class="booth-wrapper" data-name="íˆ¬ì—ì´ì—”" style="transform-origin: 60px 20px;">
          <rect id="booth-2an" x="40" y="0" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="60" y="24" text-anchor="middle" font-size="9" fill="#E91E63" font-weight="bold">íˆ¬ì—ì´ì—”</text>
        </g>
        
        <g class="booth-wrapper" data-name="íƒœê·¸" style="transform-origin: 100px 20px;">
          <rect id="booth-tag" x="80" y="0" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="100" y="24" text-anchor="middle" font-size="11" fill="#E91E63" font-weight="bold">íƒœê·¸</text>
        </g>
        
        <g class="booth-wrapper" data-name="ì—ìŠ¤ë„¤ì´ì²˜" style="transform-origin: 140px 20px;">
          <rect id="booth-snature" x="120" y="0" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="140" y="24" text-anchor="middle" font-size="8" fill="#E91E63" font-weight="bold">ì—ìŠ¤ë„¤ì´ì²˜</text>
        </g>
        
        <g class="booth-wrapper" data-name="ì—ë›°ë“œ" style="transform-origin: 180px 20px;">
          <rect id="booth-etude" x="160" y="0" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="180" y="24" text-anchor="middle" font-size="9" fill="#E91E63" font-weight="bold">ì—ë›°ë“œ</text>
        </g>
        
        <g class="booth-wrapper" data-name="ë² ë…¸í”„&ì–Œì–Œí”„ë¡œí‹´" style="transform-origin: 220px 20px;">
          <rect id="booth-benop" x="200" y="0" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="220" y="18" text-anchor="middle" font-size="6" fill="#E91E63" font-weight="bold">ë² ë…¸í”„ &amp;</text>
          <text x="220" y="28" text-anchor="middle" font-size="6" fill="#E91E63" font-weight="bold">ì–Œì–Œí”„ë¡œí‹´</text>
        </g>
        
        <!-- Empty booth next to the last booth (open at bottom) - íˆ¬í‘œ -->
        <g class="booth-wrapper" data-name="íˆ¬í‘œ" style="transform-origin: 260px 20px;">
          <path id="booth-vote" d="M240,0 L280,0 L280,40 L240,40 L240,0" fill="rgba(255, 217, 229, 0.5)" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <line x1="240" y1="40" x2="280" y2="40" stroke="white" stroke-width="3"/>
          <rect x="240" y="0" width="40" height="40" fill="white" class="booth-hover-target"/>
          <text x="260" y="24" text-anchor="middle" font-size="10" fill="#333" font-weight="bold">íˆ¬í‘œ</text>
        </g>
        
        <!-- Middle row of circular elements with no radiating lines - with narrower spacing -->
        <g transform="translate(65, 100)" class="booth-group booth-wrapper" data-name="ì—í¬ë©€" data-transform-x="65" data-transform-y="80">
          <circle id="booth-eckmal" cx="0" cy="0" r="30" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="0" y="5" text-anchor="middle" font-size="11" fill="#E91E63" font-weight="bold">ì—í¬ë©€</text>
        </g>
        
        <g transform="translate(160, 100)" class="booth-group booth-wrapper" data-name="ë¬´ì§€ê°œë§¨ì…˜" data-transform-x="160" data-transform-y="80">
          <circle id="booth-rainbow" cx="0" cy="0" r="30" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="0" y="5" text-anchor="middle" font-size="8" fill="#E91E63" font-weight="bold">ë¬´ì§€ê°œë§¨ì…˜</text>
        </g>
        
        <g transform="translate(255, 100)" class="booth-group booth-wrapper" data-name="ì—ìŠ¤ì˜ì•„" data-transform-x="255" data-transform-y="80">
          <circle id="booth-espoir" cx="0" cy="0" r="30" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="0" y="5" text-anchor="middle" font-size="9" fill="#E91E63" font-weight="bold">ì—ìŠ¤ì˜ì•„</text>
        </g>
        
        <!-- Bottom row of pink squares -->
        <g class="booth-wrapper" data-name="ëª°ë°”ë‹ˆ" style="transform-origin: 20px 180px;">
          <rect id="booth-molvany" x="0" y="160" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="20" y="184" text-anchor="middle" font-size="9" fill="#E91E63" font-weight="bold">ëª°ë°”ë‹ˆ</text>
        </g>
        
        <g class="booth-wrapper" data-name="ë¦´ë¦¬ë°”ì´ë ˆë“œ" style="transform-origin: 60px 180px;">
          <rect id="booth-lilybyred" x="40" y="160" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="60" y="178" text-anchor="middle" font-size="7" fill="#E91E63" font-weight="bold">ë¦´ë¦¬ë°”ì´</text>
          <text x="60" y="188" text-anchor="middle" font-size="7" fill="#E91E63" font-weight="bold">ë ˆë“œ</text>
        </g>
        
        <g class="booth-wrapper" data-name="ë‹¬ë°”" style="transform-origin: 100px 180px;">
          <rect id="booth-dalba" x="80" y="160" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="100" y="184" text-anchor="middle" font-size="9" fill="#E91E63" font-weight="bold">ë‹¬ë°”</text>
        </g>
        
        <!-- Space between ë‹¬ë°” and ì‚ì•„ (1 booth width gap) -->
        
        <g class="booth-wrapper" data-name="ì‚ì•„" style="transform-origin: 180px 180px;">
          <rect id="booth-bbia" x="160" y="160" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="180" y="184" text-anchor="middle" font-size="9" fill="#E91E63" font-weight="bold">ì‚ì•„</text>
        </g>
        
        <!-- Empty booth next to ì‚ì•„ (open at top) with 1.5x width - ì…ì¥ì•ˆë‚´ -->
        <g class="booth-wrapper" data-name="ì…ì¥ì•ˆë‚´" style="transform-origin: 230px 180px;">
          <path id="booth-entrance" d="M200,160 L260,160 L260,200 L200,200 L200,160" fill="none" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <line x1="201" y1="160" x2="259" y2="160" stroke="white" stroke-width="3"/>
          <!-- ì…ì¥ì•ˆë‚´ ë¶€ìŠ¤ì˜ í°ìƒ‰ ë°°ê²½ ì¶”ê°€ -->
          <rect x="200" y="160" width="60" height="40" fill="white" class="booth-hover-target"/>
          <!-- ì…ì¥ì•ˆë‚´ text in the empty booth next to ì‚ì•„ -->
          <text x="230" y="184" text-anchor="middle" font-size="10" fill="#333" font-weight="bold">ì…ì¥ì•ˆë‚´</text>
        </g>
        
        <!-- Black arrow between ë‹¬ë°” and ì‚ì•„ pointing straight up, positioned lower -->
        <g id="booth-entrance" transform="translate(140, 180)" class="booth booth-group booth-wrapper" data-name="ì…êµ¬" data-transform-x="230" data-transform-y="180">
          <polygon points="0,-15 5,-5 -5,-5" fill="#333" stroke="#333" stroke-width="1.5"/>
          <line x1="0" y1="-5" x2="0" y2="10" stroke="#333" stroke-width="2" stroke-linecap="round"/>
          <rect x="-15" y="-15" width="30" height="30" fill="transparent"/>
        </g>
        
        <!-- Black arrow pointing down near the ì…ì¥ì•ˆë‚´ booth, with open bottom - ì¶œêµ¬ -->
        <g id="booth-exit" transform="translate(280, 180)" class="booth booth-group booth-wrapper" data-name="ì¶œêµ¬" data-transform-x="280" data-transform-y="180">
          <polygon points="0,15 5,5 -5,5" fill="#333" stroke="#333" stroke-width="1.5"/>
          <line x1="0" y1="5" x2="0" y2="-15" stroke="#333" stroke-width="2" stroke-linecap="round"/>
          <rect x="-15" y="-15" width="30" height="30" fill="transparent"/>
        </g>
        
        <!-- Create a white gap specifically for the arrow at 280,180 -->
        <line x1="270" y1="200" x2="290" y2="200" stroke="white" stroke-width="4"/>
        
        <!-- Modified outline for the map with specific breaks -->
        <path d="M0,0 L320,0 L320,160 L320,160 L200,200 L200,210 L0,160 L0,0" fill="none" stroke="none"/>
        
        <!-- Left vertical line ending at ëª°ë°”ë‹ˆ -->
        <line x1="0" y1="0" x2="0" y2="160" stroke="#E91E63" stroke-width="2"/>
        
        <!-- Top horizontal line -->
        <line x1="0" y1="0" x2="320" y2="0" stroke="#E91E63" stroke-width="2"/>
        
        <!-- Right vertical line - shortened to match left side -->
        <line x1="320" y1="0" x2="320" y2="160" stroke="#E91E63" stroke-width="2"/>
        
        <!-- Bottom horizontal lines with gaps -->
        <line x1="0" y1="200" x2="120" y2="200" stroke="#E91E63" stroke-width="2"/>
        <line x1="200" y1="200" x2="270" y2="200" stroke="#E91E63" stroke-width="2"/>
        <line x1="290" y1="200" x2="320" y2="200" stroke="#E91E63" stroke-width="2"/>
      </svg>
    </div>
    
    <div class="info-panel">
      <div id="default-info">
        <div class="no-booth-selected">
          ë¶€ìŠ¤ë¥¼ ì„ íƒí•˜ì—¬ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”
        </div>
      </div>
      
      <div id="booth-info" style="display: none;">
        <div class="booth-name" id="selected-booth-name"></div>
        
        <div class="info-panel-scroll">
          <div id="sections-container">
            <!-- ì´ë²¤íŠ¸ ì„¹ì…˜ -->
            <div class="booth-section" id="events-section-container" style="display: none;">
              <div class="section-content" id="events-section">
                <div class="booth-events">
                  <ul class="event-list" id="event-list"></ul>
                </div>
              </div>
            </div>
            
            <div id="copy-code-container" class="scrollable-content-bottom"></div>
          </div>
        </div>
        
        <div class="info-panel-fixed">
          <div class="social-links">
            <a href="#" id="instagram-link" class="instagram-icon" target="_blank" title="ì¸ìŠ¤íƒ€ê·¸ë¨" style="display:none;">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="#" id="kakaotalk-link" class="kakaotalk-icon" target="_blank" title="ì¹´ì¹´ì˜¤í†¡" style="display:none;">
              <i class="fas fa-comment"></i>
            </a>
            <a href="https://abrad.zigzag.kr/8q9wsd" id="zigzag-link" class="zigzag-icon" target="_blank" title="ì§€ê·¸ì¬ê·¸" style="display:none;">
              <img src="https://cf.res.s.zigzag.kr/favicons/zigzag/favicon.ico" alt="Z" style="width: 25px; height: 25px;">
            </a>
            <!-- ì¶”ê°€ ë§í¬ë¥¼ ìœ„í•œ ì»¨í…Œì´ë„ˆ(ì˜ˆì•½ëœ ì˜ì—­) - ê° ë§í¬ëŠ” ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë™ì ìœ¼ë¡œ ì¶”ê°€ -->
            <span id="additional-links-container" style="display:none;"></span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="copyright">
      Copyright &copy; 2025 by pop-down. All rights reserved.
    </div>
  </div>

  <!-- PWA ì„¤ì¹˜ ì•ˆë‚´ -->
  <div id="pwa-install-prompt" class="pwa-install-prompt" style="display: none;">
    <div class="pwa-prompt-content">
      <div class="pwa-prompt-message">
        <i class="fas fa-mobile-alt"></i> ì•±ìœ¼ë¡œ ì„¤ì¹˜í•˜ë©´ ë” í¸í•˜ê²Œ ì´ìš©í•  ìˆ˜ ìˆì–´ìš”!
      </div>
      <div class="pwa-prompt-buttons">
        <button id="pwa-install-btn" class="pwa-install-btn">ì„¤ì¹˜í•˜ê¸°</button>
        <button id="pwa-close-btn" class="pwa-close-btn">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <script>
  // ë²„ì „ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ ìŠ¤í¬ë¦½íŠ¸ URLì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
  function loadScriptWithVersion() {
    // í˜„ì¬ ì‹œê°„ì„ ìºì‹œ ë²„ìŠ¤íŒ… íŒŒë¼ë¯¸í„°ë¡œ ì‚¬ìš©
    const cacheBuster = new Date().getTime();
    
    // ìŠ¤í¬ë¦½íŠ¸ ìš”ì†Œ ìƒì„±
    const script = document.createElement('script');
    script.type = 'text/javascript';
    
    // ìºì‹œ ë²„ìŠ¤íŒ… íŒŒë¼ë¯¸í„° ì¶”ê°€
    script.src = `script.js?v=${cacheBuster}`;
    
    // ìŠ¤í¬ë¦½íŠ¸ë¥¼ body ëì— ì¶”ê°€
    document.body.appendChild(script);
  }
  
  // ë§µ ë¡œë“œ í•¨ìˆ˜ ì¶”ê°€
  async function loadMap() {
    try {
      const response = await fetch('/api/map-template');
      if (!response.ok) {
        throw new Error('ë§µ í…œí”Œë¦¿ì„ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
      }
      const mapHTML = await response.text();
      document.getElementById('map-wrapper').innerHTML = mapHTML;
    } catch (error) {
      console.error('ë§µ ë¡œë“œ ì˜¤ë¥˜:', error);
      // ì˜¤ë¥˜ ë°œìƒ ì‹œ ë¡œì»¬ì— ì €ì¥ëœ í…œí”Œë¦¿ ì‚¬ìš©
      const fallbackResponse = await fetch('/common-map/templates/boothMap.svg');
      const fallbackHTML = await fallbackResponse.text();
      document.getElementById('map-wrapper').innerHTML = fallbackHTML;
    }
    
    // ë§µ ë¡œë“œ í›„ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
    loadScriptWithVersion();
  }
  
  // í˜ì´ì§€ ë¡œë“œ ì‹œ ë§µ ë¡œë“œ
  window.addEventListener('load', loadMap);
  </script>
  
  <script>
    // ë¶€ìŠ¤ í•­ëª© ì„ íƒ ê¸°ëŠ¥
    document.addEventListener('DOMContentLoaded', function() {
      // ëª¨ë“  ë¶€ìŠ¤ ìš”ì†Œ ì„ íƒ
      const boothElements = document.querySelectorAll('.booth-wrapper');
      
      // ê° ë¶€ìŠ¤ ìš”ì†Œì— í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
      boothElements.forEach(booth => {
        booth.addEventListener('click', function() {
          // ë¶€ìŠ¤ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
          const boothName = this.getAttribute('data-name');
          
          // ë¶€ìŠ¤ ì´ë¦„ì´ ì—†ìœ¼ë©´ ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ
          if (!boothName) return;
          
          // ê¸°ì¡´ ì„ íƒëœ ë¶€ìŠ¤ì˜ ê°•ì¡° íš¨ê³¼ ì œê±°
          document.querySelectorAll('.booth-wrapper').forEach(b => {
            b.classList.remove('selected');
          });
          
          // ì„ íƒëœ ë¶€ìŠ¤ ê°•ì¡° íš¨ê³¼ ì¶”ê°€
          this.classList.add('selected');
          
          // ë¶€ìŠ¤ ì •ë³´ í‘œì‹œ í•¨ìˆ˜ í˜¸ì¶œ
          showBoothInfo(boothName);
          
          // ìµœê·¼ ë°©ë¬¸ ë¶€ìŠ¤ ì €ì¥
          saveLastVisitedBooth(boothName);
        });
      });
      
      // ë©”ì¸ íƒ€ì´í‹€(h1)ì— í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
      const mainTitle = document.getElementById('main-title');
      if (mainTitle) {
        mainTitle.addEventListener('click', function() {
          // ê¸°ì¡´ ì„ íƒëœ ë¶€ìŠ¤ì˜ ê°•ì¡° íš¨ê³¼ ì œê±°
          document.querySelectorAll('.booth-wrapper').forEach(b => {
            b.classList.remove('selected');
          });
          
          // ì•ˆë‚´ ì •ë³´ í‘œì‹œ
          showBoothInfo('ì•ˆë‚´');
        });
      }
      
      // í˜ì´ì§€ ë¡œë“œ ì‹œ ë§ˆì§€ë§‰ìœ¼ë¡œ ë°©ë¬¸í•œ ë¶€ìŠ¤ ì •ë³´ ëŒ€ì‹  ì´ˆê¸° ì •ë³´ í‘œì‹œ
      loadEmptyBooth();
      // ì¶”ê°€ë¡œ ì´ˆê¸° ì •ë³´ í‘œì‹œ
      showBoothInfo('ì•ˆë‚´');
    });
    
    // ë¡œì»¬ í™˜ê²½ì—ì„œë§Œ ë””ë²„ê·¸ ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ëŠ” ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
    function debugLog(message, ...args) {
      // ë¡œì»¬ í™˜ê²½ì—ì„œë§Œ ë¡œê·¸ ì¶œë ¥ (localhost ë˜ëŠ” íŒŒì¼ í”„ë¡œí† ì½œ)
      if (window.location.hostname === 'localhost' || 
          window.location.hostname === '127.0.0.1' || 
          window.location.protocol === 'file:') {
        console.debug(message, ...args);
      }
    }
    
    // ë¡œì»¬ í™˜ê²½ì—ì„œë§Œ ì¼ë°˜ ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ëŠ” ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
    function logMessage(message, ...args) {
      // ë¡œì»¬ í™˜ê²½ì—ì„œë§Œ ë¡œê·¸ ì¶œë ¥ (localhost ë˜ëŠ” íŒŒì¼ í”„ë¡œí† ì½œ)
      if (window.location.hostname === 'localhost' || 
          window.location.hostname === '127.0.0.1' || 
          window.location.protocol === 'file:') {
        console.log(message, ...args);
      }
    }
    
    if ('serviceWorker' in navigator && location.protocol !== 'file:') {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js')
          .then(reg => {
            debugLog('ì„œë¹„ìŠ¤ ì›Œì»¤ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.', reg);
            
            // ì„œë¹„ìŠ¤ ì›Œì»¤ ì—…ë°ì´íŠ¸ í™•ì¸
            reg.addEventListener('updatefound', () => {
              const newWorker = reg.installing;
              debugLog('ìƒˆ ì„œë¹„ìŠ¤ ì›Œì»¤ ì„¤ì¹˜ì¤‘', newWorker);
              
              // ìƒíƒœ ë³€ê²½ ê°ì§€
              newWorker.addEventListener('statechange', () => {
                debugLog('ì„œë¹„ìŠ¤ ì›Œì»¤ ìƒíƒœ ë³€ê²½:', newWorker.state);
              });
            });
          })
          .catch(err => logMessage('ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ ì‹¤íŒ¨:', err));
      });
    } else if (location.protocol === 'file:') {
      debugLog('ë¡œì»¬ í™˜ê²½ì—ì„œëŠ” ì„œë¹„ìŠ¤ ì›Œì»¤ê°€ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. HTTP ì„œë²„ì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”.');
    }
  </script>
</body>
</html>