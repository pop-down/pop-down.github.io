<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>BE·YOU·TIFUL ZIGZAG</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Poppins 웹폰트 추가 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* 카카오빅산스 웹폰트 추가 */
    @font-face {
      font-family: 'KakaoBigSans-ExtraBold';
      src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/2503@1.0/KakaoBigSans-ExtraBold.woff2') format('woff2');
      font-weight: 800;
      font-style: normal;
    }
    
    /* 제목 스타일 수정 */
    .page-title {
      text-align: center;
      margin-bottom: 20px;
      width: 100%;
      display: flex;
      justify-content: center;
    }
    
    .page-title h1 {
      font-family: 'Poppins', sans-serif;
    }
    
    /* 정보란 내용 폰트 수정 */
    .event-list li, .product-list li, .booth-description, .section-content {
      font-family: 'KakaoBigSans-ExtraBold', 'Pretendard', sans-serif;
    }

    /* 스크롤 영역 문제 해결을 위한 스타일 */
    body {
      width: 100%;
      overflow-x: hidden;
    }
    
    .info-panel {
      display: flex;
      flex-direction: column;
      height: 500px;
      overflow: hidden;
      position: relative;
    }
    
    .info-panel-scroll {
      flex: 1;
      overflow-y: auto;
      margin-bottom: 55px; /* 소셜 링크 영역 높이만큼 여백 추가 */
      min-height: 0;
      max-height: 420px;
      -ms-overflow-style: auto; /* IE와 Edge */
      scrollbar-width: auto; /* Firefox */
      position: relative; /* 추가: 상대 위치 설정 */
    }
    
    .info-panel-scroll::-webkit-scrollbar {
      width: 5px; /* 스크롤바 너비 */
    }
    
    .info-panel-scroll::-webkit-scrollbar-thumb {
      background-color: #FF4D9C; /* 스크롤바 색상 */
      border-radius: 5px;
    }
    
    .info-panel-scroll::-webkit-scrollbar-track {
      background: #f0f0f0; /* 스크롤바 트랙 색상 */
      border-radius: 5px;
    }
    
    .info-panel-fixed {
      padding: 8px 10px;
      position: absolute; /* 추가: 절대 위치 설정 */
      bottom: 0;
      left: 0;
      right: 0;
      background-color: white;
      z-index: 100; /* z-index 설정 추가 */
      border-top: 1px solid #ffd9e5;
      min-height: 55px; /* 최소 높이 지정 */
      box-sizing: border-box; /* 크기 계산에 패딩 포함 */
    }
    
    .social-links {
      display: flex;
      gap: 15px;
      align-items: center;
      justify-content: center;
      margin: 0; /* 마진 제거 */
      padding: 5px 0; /* 패딩 추가 */
    }
    
    @media (max-width: 767px) {
      .info-panel {
        height: 350px;
        position: relative; /* 추가: 상대 위치 설정 */
        overflow: hidden; /* 오버플로우 숨김 처리 */
      }
      
      .info-panel-scroll {
        margin-bottom: 70px; /* fixed 영역 높이보다 충분한 여백 추가 */
        max-height: 250px; /* 모바일에서는 더 낮게 조정 */
        position: relative;
        padding-bottom: 20px; /* 하단 패딩 추가 */
      }
      
      .info-panel-fixed {
        padding: 8px 10px;
        position: absolute; /* 추가: 절대 위치 설정 */
        bottom: 0;
        left: 0;
        right: 0;
        background-color: white;
        z-index: 100; /* z-index 설정 추가 */
        border-top: 1px solid #ffd9e5;
      }
    }
  </style>
</head>
<body class="custom-font">
  <!-- 공지 팝업 추가 -->
  <div id="notice-popup" class="notice-popup" style="display: none;">
    <div class="notice-content">
      <h3>안내</h3>
      <ul>
        <li>간단하게 만든 페이지이므로 버그가 있을 수 있습니다</li>
        <li>현장상황에 따라 변동가능, 반영 불가합니다</li>
        <li>공유는 피해주세요 😊</li>
        <li>가난한 서버입니다. 막힐 수 있음</li>
        <li>아이폰에서 테스트 안해봤습니다</li>
      </ul>
      <button id="notice-confirm-btn">확인 & 다시 열지 않기</button>
    </div>
  </div>
  
  <div class="container">
    <div class="page-title">
      <h1 id="main-title" style="cursor: pointer;">BE·YOU·TIFUL ZIGZAG</h1>
    </div>
    <div class="map-container">
      <!-- SVG 지도 -->
      <svg id="booth-map" class="booth-map" viewBox="0 0 320 210" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
        <!-- Background white fill -->
        <rect x="0" y="0" width="320" height="210" fill="white" />
        
        <!-- Top row of pink squares -->
        <g class="booth-wrapper" data-name="잇퓨" style="transform-origin: 20px 20px;">
          <rect id="booth-itpu" x="0" y="0" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="20" y="24" text-anchor="middle" font-size="11" fill="#E91E63" font-weight="bold">잇퓨</text>
        </g>
        
        <g class="booth-wrapper" data-name="투에이엔" style="transform-origin: 60px 20px;">
          <rect id="booth-2an" x="40" y="0" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="60" y="24" text-anchor="middle" font-size="9" fill="#E91E63" font-weight="bold">투에이엔</text>
        </g>
        
        <g class="booth-wrapper" data-name="태그" style="transform-origin: 100px 20px;">
          <rect id="booth-tag" x="80" y="0" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="100" y="24" text-anchor="middle" font-size="11" fill="#E91E63" font-weight="bold">태그</text>
        </g>
        
        <g class="booth-wrapper" data-name="에스네이처" style="transform-origin: 140px 20px;">
          <rect id="booth-snature" x="120" y="0" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="140" y="24" text-anchor="middle" font-size="8" fill="#E91E63" font-weight="bold">에스네이처</text>
        </g>
        
        <g class="booth-wrapper" data-name="에뛰드" style="transform-origin: 180px 20px;">
          <rect id="booth-etude" x="160" y="0" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="180" y="24" text-anchor="middle" font-size="9" fill="#E91E63" font-weight="bold">에뛰드</text>
        </g>
        
        <g class="booth-wrapper" data-name="베노프&얌얌프로틴" style="transform-origin: 220px 20px;">
          <rect id="booth-benop" x="200" y="0" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="220" y="18" text-anchor="middle" font-size="6" fill="#E91E63" font-weight="bold">베노프 &amp;</text>
          <text x="220" y="28" text-anchor="middle" font-size="6" fill="#E91E63" font-weight="bold">얌얌프로틴</text>
        </g>
        
        <!-- Empty booth next to the last booth (open at bottom) - 투표 -->
        <g class="booth-wrapper" data-name="투표" style="transform-origin: 260px 20px;">
          <path id="booth-vote" d="M240,0 L280,0 L280,40 L240,40 L240,0" fill="rgba(255, 217, 229, 0.5)" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <line x1="240" y1="40" x2="280" y2="40" stroke="white" stroke-width="3"/>
          <rect x="240" y="0" width="40" height="40" fill="white" class="booth-hover-target"/>
          <text x="260" y="24" text-anchor="middle" font-size="10" fill="#333" font-weight="bold">투표</text>
        </g>
        
        <!-- Middle row of circular elements with no radiating lines - with narrower spacing -->
        <g transform="translate(65, 100)" class="booth-group booth-wrapper" data-name="에크멀" data-transform-x="65" data-transform-y="80">
          <circle id="booth-eckmal" cx="0" cy="0" r="30" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="0" y="5" text-anchor="middle" font-size="11" fill="#E91E63" font-weight="bold">에크멀</text>
        </g>
        
        <g transform="translate(160, 100)" class="booth-group booth-wrapper" data-name="무지개맨션" data-transform-x="160" data-transform-y="80">
          <circle id="booth-rainbow" cx="0" cy="0" r="30" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="0" y="5" text-anchor="middle" font-size="8" fill="#E91E63" font-weight="bold">무지개맨션</text>
        </g>
        
        <g transform="translate(255, 100)" class="booth-group booth-wrapper" data-name="에스쁘아" data-transform-x="255" data-transform-y="80">
          <circle id="booth-espoir" cx="0" cy="0" r="30" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="0" y="5" text-anchor="middle" font-size="9" fill="#E91E63" font-weight="bold">에스쁘아</text>
        </g>
        
        <!-- Bottom row of pink squares -->
        <g class="booth-wrapper" data-name="몰바니" style="transform-origin: 20px 180px;">
          <rect id="booth-molvany" x="0" y="160" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="20" y="184" text-anchor="middle" font-size="9" fill="#E91E63" font-weight="bold">몰바니</text>
        </g>
        
        <g class="booth-wrapper" data-name="릴리바이레드" style="transform-origin: 60px 180px;">
          <rect id="booth-lilybyred" x="40" y="160" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="60" y="178" text-anchor="middle" font-size="7" fill="#E91E63" font-weight="bold">릴리바이</text>
          <text x="60" y="188" text-anchor="middle" font-size="7" fill="#E91E63" font-weight="bold">레드</text>
        </g>
        
        <g class="booth-wrapper" data-name="달바" style="transform-origin: 100px 180px;">
          <rect id="booth-dalba" x="80" y="160" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="100" y="184" text-anchor="middle" font-size="9" fill="#E91E63" font-weight="bold">달바</text>
        </g>
        
        <!-- Space between 달바 and 삐아 (1 booth width gap) -->
        
        <g class="booth-wrapper" data-name="삐아" style="transform-origin: 180px 180px;">
          <rect id="booth-bbia" x="160" y="160" width="40" height="40" fill="#ffd9e5" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <text x="180" y="184" text-anchor="middle" font-size="9" fill="#E91E63" font-weight="bold">삐아</text>
        </g>
        
        <!-- Empty booth next to 삐아 (open at top) with 1.5x width - 입장안내 -->
        <g class="booth-wrapper" data-name="입장안내" style="transform-origin: 230px 180px;">
          <path id="booth-entrance" d="M200,160 L260,160 L260,200 L200,200 L200,160" fill="none" stroke="#E91E63" stroke-width="1.5" class="booth"/>
          <line x1="201" y1="160" x2="259" y2="160" stroke="white" stroke-width="3"/>
          <!-- 입장안내 부스의 흰색 배경 추가 -->
          <rect x="200" y="160" width="60" height="40" fill="white" class="booth-hover-target"/>
          <!-- 입장안내 text in the empty booth next to 삐아 -->
          <text x="230" y="184" text-anchor="middle" font-size="10" fill="#333" font-weight="bold">입장안내</text>
        </g>
        
        <!-- Black arrow between 달바 and 삐아 pointing straight up, positioned lower -->
        <g id="booth-entrance" transform="translate(140, 180)" class="booth booth-group booth-wrapper" data-name="입구" data-transform-x="230" data-transform-y="180">
          <polygon points="0,-15 5,-5 -5,-5" fill="#333" stroke="#333" stroke-width="1.5"/>
          <line x1="0" y1="-5" x2="0" y2="10" stroke="#333" stroke-width="2" stroke-linecap="round"/>
          <rect x="-15" y="-15" width="30" height="30" fill="transparent"/>
        </g>
        
        <!-- Black arrow pointing down near the 입장안내 booth, with open bottom - 출구 -->
        <g id="booth-exit" transform="translate(280, 180)" class="booth booth-group booth-wrapper" data-name="출구" data-transform-x="280" data-transform-y="180">
          <polygon points="0,15 5,5 -5,5" fill="#333" stroke="#333" stroke-width="1.5"/>
          <line x1="0" y1="5" x2="0" y2="-15" stroke="#333" stroke-width="2" stroke-linecap="round"/>
          <rect x="-15" y="-15" width="30" height="30" fill="transparent"/>
        </g>
        
        <!-- Create a white gap specifically for the arrow at 280,180 -->
        <line x1="270" y1="200" x2="290" y2="200" stroke="white" stroke-width="4"/>
        
        <!-- Modified outline for the map with specific breaks -->
        <path d="M0,0 L320,0 L320,160 L320,160 L200,200 L200,210 L0,160 L0,0" fill="none" stroke="none"/>
        
        <!-- Left vertical line ending at 몰바니 -->
        <line x1="0" y1="0" x2="0" y2="160" stroke="#E91E63" stroke-width="2"/>
        
        <!-- Top horizontal line -->
        <line x1="0" y1="0" x2="320" y2="0" stroke="#E91E63" stroke-width="2"/>
        
        <!-- Right vertical line - shortened to match left side -->
        <line x1="320" y1="0" x2="320" y2="160" stroke="#E91E63" stroke-width="2"/>
        
        <!-- Bottom horizontal lines with gaps -->
        <line x1="0" y1="200" x2="120" y2="200" stroke="#E91E63" stroke-width="2"/>
        <line x1="200" y1="200" x2="270" y2="200" stroke="#E91E63" stroke-width="2"/>
        <line x1="290" y1="200" x2="320" y2="200" stroke="#E91E63" stroke-width="2"/>
      </svg>
    </div>
    
    <div class="info-panel">
      <div id="default-info">
        <div class="no-booth-selected">
          부스를 선택하여 정보를 확인하세요
        </div>
      </div>
      
      <div id="booth-info" style="display: none;">
        <div class="booth-name" id="selected-booth-name"></div>
        
        <div class="info-panel-scroll">
          <div id="sections-container">
            <!-- 이벤트 섹션 -->
            <div class="booth-section" id="events-section-container" style="display: none;">
              <div class="section-content" id="events-section">
                <div class="booth-events">
                  <ul class="event-list" id="event-list"></ul>
                </div>
              </div>
            </div>
            
            <div id="copy-code-container" class="scrollable-content-bottom"></div>
          </div>
        </div>
        
        <div class="info-panel-fixed">
          <div class="social-links">
            <a href="#" id="instagram-link" class="instagram-icon" target="_blank" title="인스타그램">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="#" id="kakaotalk-link" class="kakaotalk-icon" target="_blank" title="카카오톡">
              <i class="fas fa-comment"></i>
            </a>
            <a href="https://zigzag.kr/events/5134aba9-0a8e-416a-87eb-448d8ece88f9" id="zigzag-link" class="zigzag-icon" target="_blank" title="지그재그">
              <img src="https://cf.res.s.zigzag.kr/favicons/zigzag/favicon.ico" alt="Z" style="width: 20px; height: 20px;">
            </a>
          </div>
        </div>
      </div>
    </div>
    
    <div class="copyright">
      Copyright &copy; 2025 by pop-down. All rights reserved.
    </div>
  </div>

  <script src="script.js"></script>
  <script>
    // 인라인 스크립트로 HTML에 직접 추가된 함수들
    document.addEventListener('DOMContentLoaded', function() {
      // 모든 부스 래퍼 요소 가져오기
      const boothWrappers = document.querySelectorAll('.booth-wrapper');
      
      // 페이지 제목 클릭 시 안내 정보 표시
      const mainTitle = document.getElementById('main-title');
      mainTitle.addEventListener('click', function() {
        showBoothInfo('안내');
      });
      
      // 현재 선택된 부스 추적
      let selectedBooth = null;
      // 전역 변수로 노출
      window.selectedBooth = selectedBooth;
      
      // 각 부스 래퍼에 호버 이벤트 리스너 추가
      boothWrappers.forEach(wrapper => {
        // 호버 이벤트
        wrapper.addEventListener('mouseenter', function() {
          // z-index 우선순위: 호버 > 선택 > 나머지
          document.querySelectorAll('.booth-wrapper').forEach(w => {
            if (w.classList.contains('selected')) {
              // 선택된 부스는 z-index 1000 유지
              w.style.zIndex = '1000';
            } else if (w !== this) {
              // 호버되지 않고 선택되지 않은 부스는 z-index 초기화
              w.style.zIndex = '';
            }
          });
          
          // 호버된 부스의 z-index를 가장 높게 설정 (선택된 부스보다 우선)
          this.style.zIndex = '9999';
          
          // 호버 시 색상 변경만 적용 (크기 변경 제거)
          if (this.classList.contains('booth-group')) {
            // 원 요소 색상 변경
            const circle = this.querySelector('circle.booth');
            if (circle) {
              if (!circle._origFill) {
                circle._origFill = circle.getAttribute('fill');
              }
              circle.setAttribute('fill', '#FF97C1');
            }
            
            // 입구, 출구 호버 시 폴리곤과 라인 색상 변경
            const boothName = this.getAttribute('data-name');
            if (boothName === '입구' || boothName === '출구') {
              const polygon = this.querySelector('polygon');
              const line = this.querySelector('line');
              if (polygon) {
                if (!polygon._origFill) {
                  polygon._origFill = polygon.getAttribute('fill');
                }
                polygon.setAttribute('fill', '#FF97C1');
                polygon.setAttribute('stroke', '#FF97C1');
              }
              if (line) {
                if (!line._origStroke) {
                  line._origStroke = line.getAttribute('stroke');
                }
                line.setAttribute('stroke', '#FF97C1');
              }
            }
          } else {
            // 사각형 요소 색상 변경
            const rect = this.querySelector('rect.booth');
            if (rect) {
              if (!rect._origFill) {
                rect._origFill = rect.getAttribute('fill');
              }
              rect.setAttribute('fill', '#FF97C1');
            }
            
            // 투표, 입장안내 부스 처리
            const boothName = this.getAttribute('data-name');
            if (boothName === '투표') {
              // CSS로 처리하도록 이 부분은 삭제 (booth-hover-target 클래스로 처리)
            } else if (boothName === '입장안내') {
              // CSS로 처리하도록 이 부분은 삭제 (booth-hover-target 클래스로 처리)
            }
          }
        });
        
        // 호버 종료 이벤트
        wrapper.addEventListener('mouseleave', function() {
          // z-index 복원 - 선택된 부스만 높은 z-index 유지
          if (this.classList.contains('selected')) {
            this.style.zIndex = '1000';
          } else {
            this.style.zIndex = '';
          }
          
          // 색상 복원 (호버 효과 제거)
          if (this.classList.contains('booth-group')) {
            const circle = this.querySelector('circle.booth');
            if (circle && circle._origFill && !this.classList.contains('selected')) {
              circle.setAttribute('fill', circle._origFill);
            }
            
            // 입구, 출구 부스 호버 색상 복원
            const boothName = this.getAttribute('data-name');
            if ((boothName === '입구' || boothName === '출구') && !this.classList.contains('selected')) {
              const polygon = this.querySelector('polygon');
              const line = this.querySelector('line');
              if (polygon && polygon._origFill) {
                polygon.setAttribute('fill', polygon._origFill);
                polygon.setAttribute('stroke', polygon._origFill);
              }
              if (line && line._origStroke) {
                line.setAttribute('stroke', line._origStroke);
              }
            }
          } else {
            // 사각형 요소 색상 복원
            const rect = this.querySelector('rect.booth');
            if (rect && rect._origFill && !this.classList.contains('selected')) {
              rect.setAttribute('fill', rect._origFill);
            }
            
            // 투표, 입장안내 부스 색상 복원
            const boothName = this.getAttribute('data-name');
            if (boothName === '투표' && !this.classList.contains('selected')) {
              // CSS로 처리하도록 이 부분은 삭제 (booth-hover-target 클래스로 처리)
            } else if (boothName === '입장안내' && !this.classList.contains('selected')) {
              // CSS로 처리하도록 이 부분은 삭제 (booth-hover-target 클래스로 처리)
            }
          }
        });
        
        // 클릭 이벤트
        wrapper.addEventListener('click', function() {
          // 이전 선택 부스의 selected 클래스와 z-index 제거
          if (selectedBooth) {
            selectedBooth.classList.remove('selected');
            selectedBooth.style.zIndex = '';
            
            // 이전 선택 부스의 색상 복원
            if (selectedBooth.classList.contains('booth-group')) {
              const circle = selectedBooth.querySelector('circle.booth');
              if (circle && circle._origFill) {
                circle.setAttribute('fill', circle._origFill);
              }
              
              // 입구, 출구 부스 선택 해제 시 색상 복원
              const boothName = selectedBooth.getAttribute('data-name');
              if (boothName === '입구' || boothName === '출구') {
                const polygon = selectedBooth.querySelector('polygon');
                const line = selectedBooth.querySelector('line');
                if (polygon && polygon._origFill) {
                  polygon.setAttribute('fill', polygon._origFill);
                  polygon.setAttribute('stroke', polygon._origFill);
                }
                if (line && line._origStroke) {
                  line.setAttribute('stroke', line._origStroke);
                }
              }
            } else {
              const rect = selectedBooth.querySelector('rect.booth');
              if (rect && rect._origFill) {
                rect.setAttribute('fill', rect._origFill);
              }
              
              // 투표, 입장안내 부스 선택 해제 시 색상 복원
              const boothName = selectedBooth.getAttribute('data-name');
              if (boothName === '투표') {
                // CSS로 처리하도록 이 부분은 삭제 (booth-hover-target 클래스로 처리)
              } else if (boothName === '입장안내') {
                // CSS로 처리하도록 이 부분은 삭제 (booth-hover-target 클래스로 처리)
              }
            }
          }
          
          // 현재 부스를 선택된 상태로 설정
          selectedBooth = this;
          window.selectedBooth = selectedBooth;
          this.classList.add('selected');
          this.style.zIndex = '1000'; // 선택된 부스는 z-index 1000으로 설정
          
          // 부스 이름 가져오기
          const boothName = this.getAttribute('data-name');
          
          // 부스 정보 표시 함수 호출
          showBoothInfo(boothName);
          
          // 최근 방문 부스 저장
          saveLastVisitedBooth(boothName);
        });
      });
      
      // 페이지 로드 시 마지막으로 방문한 부스 정보 대신 초기 정보 표시
      loadLastVisitedBooth();
      // 추가로 초기 정보 표시
      showBoothInfo('안내');
    });
    
    // 주최사 부스인지 확인하는 함수
    function isOrganizerBooth(boothName) {
      return ['입장안내', '출구', '투표', '입구'].includes(boothName);
    }
  </script>
</body>
</html>